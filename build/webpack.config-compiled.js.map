{"version":3,"sources":["webpack.config.js"],"names":[],"mappings":"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","file":"webpack.config-compiled.js","sourcesContent":["const path = require('path');\r\nconst webpack = require('webpack');\r\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\r\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\r\nconst project = require('../project.config');\r\n\r\nconst inProject = path.resolve.bind(path, project.basePath);\r\nconst inProjectSrc = (file) => inProject(project.srcDir, file);\r\n\r\nconst __DEV__ = project.env === 'development';\r\nconst __TEST__ = project.env === 'test';\r\nconst __PROD__ = project.env === 'production';\r\n\r\nconst config = {\r\n  entry: {\r\n    normalize: [\r\n      inProjectSrc('normalize'),\r\n    ],\r\n    main: [\r\n      inProjectSrc(project.main),\r\n    ],\r\n  },\r\n  devtool: project.sourcemaps ? 'source-map' : false,\r\n  output: {\r\n    path: inProject(project.outDir),\r\n    filename: __DEV__ ? '[name].js' : '[name].[chunkhash].js',\r\n    publicPath: project.publicPath,\r\n  },\r\n  resolve: {\r\n    modules: [\r\n      inProject(project.srcDir),\r\n      'node_modules',\r\n    ],\r\n    extensions: ['*', '.js', '.jsx', '.json'],\r\n  },\r\n  externals: project.externals,\r\n  module: {\r\n    rules: [],\r\n  },\r\n  plugins: [\r\n    new webpack.DefinePlugin(Object.assign({\r\n      'process.env': { NODE_ENV: JSON.stringify(project.env) },\r\n      __DEV__,\r\n      __TEST__,\r\n      __PROD__,\r\n    }, project.globals))\r\n  ],\r\n};\r\n\r\n// JavaScript\r\n// ------------------------------------\r\nconfig.module.rules.push({\r\n  test: /\\.(js|jsx)$/,\r\n  exclude: /node_modules/,\r\n  use: [{\r\n    loader: 'babel-loader',\r\n    query: {\r\n      cacheDirectory: true,\r\n      plugins: [\r\n        'babel-plugin-transform-class-properties',\r\n        'babel-plugin-syntax-dynamic-import',\r\n        [\r\n          'babel-plugin-transform-runtime',\r\n          {\r\n            helpers: true,\r\n            polyfill: false, // we polyfill needed features in src/normalize.js\r\n            regenerator: true,\r\n          },\r\n        ],\r\n        [\r\n          'babel-plugin-transform-object-rest-spread',\r\n          {\r\n            useBuiltIns: true // we polyfill Object.assign in src/normalize.js\r\n          },\r\n        ],\r\n      ],\r\n      presets: [\r\n        'babel-preset-react',\r\n        ['babel-preset-env', {\r\n          modules: false,\r\n          targets: {\r\n            ie9: true,\r\n          },\r\n          uglify: true,\r\n        }],\r\n      ]\r\n    },\r\n  }],\r\n});\r\n\r\n// Styles\r\n// ------------------------------------\r\nconst extractStyles = new ExtractTextPlugin({\r\n  filename: 'styles/[name].[contenthash].css',\r\n  allChunks: true,\r\n  disable: __DEV__,\r\n});\r\n\r\nconfig.module.rules.push({\r\n  test: /\\.(sass|scss)$/,\r\n  loader: extractStyles.extract({\r\n    fallback: 'style-loader',\r\n    use: [\r\n      {\r\n        loader: 'css-loader',\r\n        options: {\r\n          sourceMap: project.sourcemaps,\r\n          minimize: {\r\n            autoprefixer: {\r\n              add: true,\r\n              remove: false,\r\n              browsers: ['last 2 versions'],\r\n            },\r\n            discardComments: {\r\n              removeAll : true,\r\n            },\r\n            discardUnused: false,\r\n            mergeIdents: false,\r\n            reduceIdents: false,\r\n            safe: true,\r\n            sourcemap: project.sourcemaps,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        loader: 'sass-loader',\r\n        options: {\r\n          sourceMap: project.sourcemaps,\r\n          includePaths: [\r\n            inProjectSrc('styles'),\r\n          ],\r\n        },\r\n      },\r\n    ],\r\n  })\r\n});\r\nconfig.plugins.push(extractStyles);\r\n\r\n// Images\r\n// ------------------------------------\r\nconfig.module.rules.push({\r\n  test    : /\\.(png|jpg|gif|pdf)$/,\r\n  loader  : 'url-loader',\r\n  options : {\r\n    limit : 8192,\r\n  },\r\n})\r\n\r\n// Fonts\r\n// ------------------------------------\r\n;[\r\n  ['woff', 'application/font-woff'],\r\n  ['woff2', 'application/font-woff2'],\r\n  ['otf', 'font/opentype'],\r\n  ['ttf', 'application/octet-stream'],\r\n  ['eot', 'application/vnd.ms-fontobject'],\r\n  ['svg', 'image/svg+xml'],\r\n].forEach((font) => {\r\n  const extension = font[0];\r\n  const mimetype = font[1];\r\n\r\n  config.module.rules.push({\r\n    test    : new RegExp(`\\\\.${extension}$`),\r\n    loader  : 'url-loader',\r\n    options : {\r\n      name  : 'fonts/[name].[ext]',\r\n      limit : 10000,\r\n      mimetype,\r\n    },\r\n  })\r\n});\r\n\r\n// HTML Template\r\n// ------------------------------------\r\nconfig.plugins.push(new HtmlWebpackPlugin({\r\n  template: inProjectSrc('index.html'),\r\n  inject: true,\r\n  minify: {\r\n    collapseWhitespace: true,\r\n  },\r\n}));\r\n\r\n// Development Tools\r\n// ------------------------------------\r\nif (__DEV__) {\r\n  config.entry.main.push(\r\n    `webpack-hot-middleware/client.js?path=${config.output.publicPath}__webpack_hmr`\r\n  );\r\n  config.plugins.push(\r\n    new webpack.HotModuleReplacementPlugin(),\r\n    new webpack.NamedModulesPlugin()\r\n  )\r\n}\r\n\r\n// Bundle Splitting\r\n// ------------------------------------\r\nif (!__TEST__) {\r\n  const bundles = ['normalize', 'manifest'];\r\n\r\n  if (project.vendors && project.vendors.length) {\r\n    bundles.unshift('vendor');\r\n    config.entry.vendor = project.vendors\r\n  }\r\n  config.plugins.push(new webpack.optimize.CommonsChunkPlugin({ names: bundles }))\r\n}\r\n\r\n// Production Optimizations\r\n// ------------------------------------\r\nif (__PROD__) {\r\n  config.plugins.push(\r\n    new webpack.LoaderOptionsPlugin({\r\n      minimize: true,\r\n      debug: false,\r\n    }),\r\n    new webpack.optimize.UglifyJsPlugin({\r\n      sourceMap: !!config.devtool,\r\n      comments: false,\r\n      compress: {\r\n        warnings: false,\r\n        screw_ie8: true,\r\n        conditionals: true,\r\n        unused: true,\r\n        comparisons: true,\r\n        sequences: true,\r\n        dead_code: true,\r\n        evaluate: true,\r\n        if_return: true,\r\n        join_vars: true,\r\n      },\r\n    })\r\n  )\r\n}\r\n\r\nmodule.exports = config;\r\n"]}